# monitor_template.conf - PLANTILLA (NO EDITAR DIRECTAMENTE)
# Copiar a ia_stack_monitor.conf y personalizar allí

# ======= NOTIFICACIONES =======
# Email (requiere mailutils configurado)
ALERT_EMAIL="" # Ej: "admin@dominio.com,team@dominio.com"

# Telegram (requiere jq y curl)
TELEGRAM_BOT_TOKEN="" # Ej: "123456:ABC-DEF1234ghIkl"
TELEGRAM_CHAT_ID="" # Ej: "780884083" o "123,-100456" para múltiples chats

# ======= UMBRALES =======
MIN_RESPONSE_TIME=1.0 # Segundos para considerar "lento" (ajustar según servicio)

# ======= SERVICIOS =======
# Usar nombres de contenedores Docker (no localhost)
declare -A SERVICES=(
    # Servicio          Endpoint de salud
    ["n8n"]="http://localhost:5678/healthz"
    ["ollama-gpu"]="http://localhost:11434/api/tags"
    ["whisper-api"]="http://localhost:5000/health"
    ["tts-api"]="http://localhost:5002/health" 
    ["haystack-api"]="http://localhost:8000/health"
    ["qdrant"]="http://localhost:6333/"
    ["ocr-router"]="http://localhost:5020/health"
    ["ocr-api"]="http://localhost:5003/health"
    ["ocr-paddle"]="http://localhost:5010/health"
)

# ======= OPCIONES AVANZADAS =======
# Intervalo de monitoreo en segundos (cambiar en ia_stack_monitor.conf)
MONITOR_INTERVAL=15

ALERT_GROUPING=true          # Habilita agrupamiento
MIN_CRITICAL_ALERTS=1        # Mínimo de alertas críticas para notificar
ALERT_THROTTLE_MINUTES=15    # Tiempo entre notificaciones similares